<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
	<title>jQ</title>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<link href="main.css" rel="stylesheet" type="text/css"/>
	<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.5/jquery.min.js"></script>
	<link href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/themes/base/jquery-ui.css" rel="stylesheet" type="text/css"/>
	<script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/jquery-ui.min.js"></script>
	<script type="text/javascript">
		$(document).ready(function(){
		
			$.getJSON("list.json",function(data) {
				for(var i=0;i<data.elements.length;i++){$("#list").append("<div class=\"select\">"+data.elements[i].name);}
					$(".select").draggable({
						revert: true,
						revertDuration: 0
					});
					
					$(".select").mouseover(function(){$(this).attr("id","selected").css("cursor","move");}); 
					$(".select").mouseleave(function(){$(this).removeAttr("id","selected");}); 
				});
				 
			$("#drop1").droppable({
				drop:function(){
					$(this).html($("#selected").html());
					$.getJSON("list.json",function(data) {
						for(var i=0;i<data.elements.length;i++){
							if ($("#drop1").html()==data.elements[i].name){
								$("[name=rec1]").val(data.elements[i].id);
							}
						}
					});
				}
			});
					
			$("#drop2").droppable({
				drop:function(){
					$(this).html($("#selected").html());
					$.getJSON("list.json",function(data) {
						for(var i=0;i<data.elements.length;i++){
							if ($("#drop2").html()==data.elements[i].name){
								$("[name=rec2]").val(data.elements[i].id);
							}
						}
					});
				}
			});
		
			$("#drop1").click(function(){
				$(this).html("Элемент 1");
				$("[name=rec1]").val("empty");
			});	
			$("#drop2").click(function(){
				$(this).html("Элемент 2");
				$("[name=rec2]").val("empty");
			});
	
		});		
   </script>
</head>
<body>
<!--Header -->
	<div id="header">	
	</div>
<!--Content -->
	<div id="content">
		<div id="left">
	
		</div>
		<div id="right">

		</div>
		<div id="center">
			<div class="block">
					<form name="addelement" action="#" method="post">
						<table>
							<tr>
								<td align=right>
									<label for="name">Название элемента:</label>
								</td>
								<td align=left>
									<input type="text" id="name" name="name" />
								</td>
							</tr>
							<tr>
								<td align=right>
									<label for="recipe">Рецепт:</label>
								</td>
								<td align=left>
									<div id="drop1">Элемент 1</div>
									<div id="drop2">Элемент 2</div>
									<input type="hidden" name="rec1" value="empty">  <!--Element id goes here-->
									<input type="hidden" name="rec2" value="empty">
								</td>
							</tr>
							<tr>
								<td colspan="2">
									<label for="comment">Описание:</label>
								</td>
							</tr>
							<tr>
								<td colspan="2">
									<textarea name="comment" id="comment" cols="44" rows="5"></textarea>
								</td>
							</tr>
							<tr>
								<td colspan="2">
									<input type="submit" name="addelement" value="Отправить" />
								</td>
							</tr>
						</table>
			</div>	
			<div class="block">			
				<form name="addelement" action="#" method="post">
					<table>
						<tr>
							<td>
								<label for="comment">Элементы:</label>
							</td>
						</tr>
						<tr>
							<td id="list">
							</td>
						</tr>
					</table>
			</div>
		</div>
	</div>
	<div class="clear"></div>
<!--Footer -->
	<div id="footer">
	</div>
</body>
</html>